{% extends 'base.html' %}

{% block content %}
    <div class="rpgui-container framed">
        <h1 class="title">{{ character }}</h1>
        <div class="rpgui-center">
            <a href={% url 'index' %}>- Return to main menu -</a>
        </div>

        <table id="characteristics" class="rpgui-container framed-golden">
            <tr>
                <th><p>User</p></th>
                <th><p>Race</p></th>
                <th><p>Class</p></th>
                <th><p>Alignment</p></th>
                <th><p>Level</p></th>
                <th><p>XP</p></th>
            </tr>
            <tr>
                <td><p>{{ character.user.username }}</p></td>
                <td><p>{{ character.get_race_display }}</p></td>
                <td><p>{{ character.get_class_name_display }}</p></td>
                <td><p>{{ character.get_alignment_display }}</p></td>
                <td><p>{{ character.level }}</p></td>
                <td><p>{{ character.xp }}</p></td>
            </tr>
        </table>

        <table id="main">
            <tr>
                <td id="hp">
                    <table class="rpgui-container framed-golden">
                        <tr>
                            <td><p>HP: {{ character.hp }} / {{ character.max_hp }}</p></td>
                        </tr>
                        <tr>
                            <td><div data-value="{% widthratio character.hp character.max_hp 1 %}" class="rpgui-progress red"></div></td>
                        </tr>
                    </table>
                </td>
                <td id="abilities">
                    <table class="rpgui-container framed-golden">
                        <tr><th colspan="3"><h3>Abilities</h3></th></tr>
                        <tr>
                            <th><p>STR:</p></th>
                            <td><p>{{ character.strength }}</p></td>
                            <td><p>({{ character.strength_modifier }})</p></td>
                        </tr>
                        <tr>
                            <th><p>DEX:</p></th>
                            <td><p>{{ character.dexterity }}</p></td>
                            <td><p>({{ character.dexterity_modifier }})</p></td>
                        </tr>
                        <tr>
                            <th><p>CON:</p></th>
                            <td><p>{{ character.constitution }}</p></td>
                            <td><p>({{ character.constitution_modifier }})</p></td>
                        </tr>
                        <tr>
                            <th><p>INT:</p></th>
                            <td><p>{{ character.intelligence }}</p></td>
                            <td><p>({{ character.intelligence_modifier }})</p></td>
                        </tr>
                        <tr>
                            <th><p>WIS:</p></th>
                            <td><p>{{ character.wisdom }}</p></td>
                            <td><p>({{ character.wisdom_modifier }})</p></td>
                        </tr>
                        <tr>
                            <th><p>CHA:</p></th>
                            <td><p>{{ character.charisma }}</p></td>
                            <td><p>({{ character.charisma_modifier }})</p></td>
                        </tr>
                    </table>
                </td>
                <td id="other-abilities">
                    <table id="proficiency-bonus" class="rpgui-container framed-golden">
                        <tr>
                            <td><p>Proficiency bonus: {{ character.proficiency_bonus }}</p></td>
                        </tr>
                    </table>
                    <table id="skills" class="rpgui-container framed-golden">
                        <tr><th><h3>Skills</h3></th></tr>
                        {% for skill in character.skills.all %}
                            <tr>
                                <td><p>{{ skill }}</p></td>
                            </tr>
                        {% empty %}
                            <tr>
                                <td><p>-</p></td>
                            </tr>
                        {% endfor %}
                    </table>
                    <table id="languages" class="rpgui-container framed-golden">
                        <tr><th><h3>Languages</h3></th></tr>
                        {% for language in character.languages.all %}
                            <tr>
                                <td><p>{{ language.get_name_display }}</p></td>
                            </tr>
                        {% endfor %}
                    </table>
                </td>
                <td id="inventory">
                    <table class="rpgui-container framed-golden">
                        <tr><th><h3>Inventory</h3></th></tr>
                        {% for equipment in inventory %}
                            <tr>
                                <td><p>{{ equipment }}</p></td>
                            </tr>
                        {% endfor %}
                    </table>
                </td>
            </tr>
        </table>


        <hr/>

        <h3>Game</h3>
        {% with game=character.player.game %}
            {% if game %}
                <p>Ongoing game: <a href={% url 'game' game.id %}>{{ game }}</p>
            {% else %}
                <p>This character is not part of any game...</p>
            {% endif %}
        {% endwith%}

    </div>
{% endblock%}
