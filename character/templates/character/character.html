{% extends 'base.html' %}

{% block content %}
    <div class="rpgui-container framed">
        <h1 class="title">{{ character }}</h1>
        <div class="rpgui-center">
            <a href={% url 'index' %}>- Return to main menu -</a>
        </div>

        <hr class="golden"/>

        <table class="rpgui-container framed-grey">
            <tr>
                <th><p>User</p></th>
                <th><p>Race</p></th>
                <th><p>Class</p></th>
                <th><p>Alignment</p></th>
                <th><p>Level</p></th>
                <th><p>XP</p></th>
            </tr>
            <tr>
                <td><p>{{ character.user.username }}</p></td>
                <td><p>{{ character.get_race_display }}</p></td>
                <td><p>{{ character.get_class_name_display }}</p></td>
                <td><p>{{ character.get_alignment_display }}</p></td>
                <td><p>{{ character.level }}</p></td>
                <td><p>{{ character.xp }}</p></td>
            </tr>
        </table>

        <p>Proficiency bonus: {{ character.proficiency_bonus }}</p>

        <h3>Abilities</h3>
        <table id="abilities">
            <tr>
                <td id="coreabilities" class="rpgui-container framed-golden">
                    <table>
                        <tr><th colspan="3"><h4>Core abilities</h4></th></tr>
                        <tr>
                            <th><p>Strength</p></th>
                            <td><p>{{ character.strength }}</p></td>
                            <td><p>({{ character.strength_modifier }})</p></td>
                        </tr>
                        <tr>
                            <th><p>Dexterity</p></th>
                            <td><p>{{ character.dexterity }}</p></td>
                            <td><p>({{ character.dexterity_modifier }})</p></td>
                        </tr>
                        <tr>
                            <th><p>Constitution</p></th>
                            <td><p>{{ character.constitution }}</p></td>
                            <td><p>({{ character.constitution_modifier }})</p></td>
                        </tr>
                        <tr>
                            <th><p>Intelligence</p></th>
                            <td><p>{{ character.intelligence }}</p></td>
                            <td><p>({{ character.intelligence_modifier }})</p></td>
                        </tr>
                        <tr>
                            <th><p>Wisdom</p></th>
                            <td><p>{{ character.wisdom }}</p></td>
                            <td><p>({{ character.wisdom_modifier }})</p></td>
                        </tr>
                        <tr>
                            <th><p>Charisma</p></th>
                            <td><p>{{ character.charisma }}</p></td>
                            <td><p>({{ character.charisma_modifier }})</p></td>
                        </tr>
                    </table>
                </td>
                <td id="additionalabilities" class="rpgui-container framed-golden">
                    <table>
                        <colgroup>
                            <col id="ability">
                            <col>
                        </colgroup>
                        <tr><th colspan="2"><h4>Additional abilities</h4></th></tr>
                        {% for ability in character.abilities.all %}
                            <tr>
                                <th><p>{{ ability }}</p></th>
                                <td><p>{{ ability.description }}</p></td>
                            </tr>
                        {% empty %}
                            <tr>
                                <td><p>-</p></td>
                            </tr>
                        {% endfor %}
                    </table>
                </td>
            </tr>
        </table>


        <h3>Languages</h3>
        {% for language in character.languages.all %}
            <p>{{ language.get_name_display }}</p>
        {% endfor %}

        <h3>HP</h3>
        <div class="rpgui-center">
            <p>Current HP: {{ character.hp }} / Maximum HP: {{ character.max_hp }}</p>
            <div id="hp-bar" data-value="{% widthratio character.hp character.max_hp 1 %}" class="rpgui-progress red"></div>
        </div>

        <hr/>

        {% with game=character.player.game %}
            {% if game %}
                <p>Ongoing game: <a href={% url 'game' game.id %}>{{ game }}</p>
            {% else %}
                <p>This character is not part of any game...</p>
            {% endif %}
        {% endwith%}

    </div>
{% endblock%}
