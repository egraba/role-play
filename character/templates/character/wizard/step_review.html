{% extends 'character/wizard/base_wizard.html' %}

{% block step_description %}
  Review your character and give them a name. You can go back to any previous step to make changes before finalizing your creation.
{% endblock %}

{% block wizard_form %}
  <div class="rpg-form-group" style="margin-bottom: 25px;">
    <label for="id_6-name" style="font-size: 1.1rem;">Character Name</label>
    {{ wizard.form.name }}
    {% if wizard.form.name.errors %}
      <div class="game-message error field-error" style="margin-top: 8px;">{{ wizard.form.name.errors }}</div>
    {% endif %}
  </div>

  {% if character_summary %}
    <!-- Species & Class -->
    <div class="review-section">
      <div class="review-section-title">
        <span>Basic Information</span>
        <button type="submit" name="wizard_goto_step" value="0" class="review-edit-link">Edit</button>
      </div>
      {% if character_summary.species %}
        <div class="preview-stat">
          <span class="preview-stat-label">Species</span>
          <span class="preview-stat-value">{{ character_summary.species.name }}</span>
        </div>
      {% endif %}
      {% if character_summary.klass %}
        <div class="preview-stat">
          <span class="preview-stat-label">Class</span>
          <span class="preview-stat-value">{{ character_summary.klass.name }}</span>
        </div>
      {% endif %}
      {% if character_summary.background %}
        <div class="preview-stat">
          <span class="preview-stat-label">Background</span>
          <span class="preview-stat-value">{{ character_summary.background }}</span>
        </div>
      {% endif %}
    </div>

    <!-- Abilities -->
    {% if character_summary.abilities %}
      <div class="review-section">
        <div class="review-section-title">
          <span>Ability Scores</span>
          <button type="submit" name="wizard_goto_step" value="2" class="review-edit-link">Edit</button>
        </div>
        <div class="review-grid">
          <div class="review-ability">
            <div class="review-ability-name">STR</div>
            <div class="review-ability-score">{{ character_summary.abilities.strength }}</div>
          </div>
          <div class="review-ability">
            <div class="review-ability-name">DEX</div>
            <div class="review-ability-score">{{ character_summary.abilities.dexterity }}</div>
          </div>
          <div class="review-ability">
            <div class="review-ability-name">CON</div>
            <div class="review-ability-score">{{ character_summary.abilities.constitution }}</div>
          </div>
          <div class="review-ability">
            <div class="review-ability-name">INT</div>
            <div class="review-ability-score">{{ character_summary.abilities.intelligence }}</div>
          </div>
          <div class="review-ability">
            <div class="review-ability-name">WIS</div>
            <div class="review-ability-score">{{ character_summary.abilities.wisdom }}</div>
          </div>
          <div class="review-ability">
            <div class="review-ability-name">CHA</div>
            <div class="review-ability-score">{{ character_summary.abilities.charisma }}</div>
          </div>
        </div>
      </div>
    {% endif %}

    <!-- Skills -->
    {% if character_summary.skills %}
      <div class="review-section">
        <div class="review-section-title">
          <span>Skills</span>
          <button type="submit" name="wizard_goto_step" value="4" class="review-edit-link">Edit</button>
        </div>
        <ul class="preview-list">
          {% for skill in character_summary.skills %}
            <li>{{ skill }}</li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}

    <!-- Equipment -->
    {% if character_summary.equipment %}
      <div class="review-section">
        <div class="review-section-title">
          <span>Equipment</span>
          <button type="submit" name="wizard_goto_step" value="5" class="review-edit-link">Edit</button>
        </div>
        <ul class="preview-list">
          {% for item in character_summary.equipment %}
            <li>{{ item }}</li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}
  {% endif %}
{% endblock %}

{% block wizard_preview %}
  <div class="preview-title">Ready to Begin</div>
  <div style="text-align: center; padding: 30px 20px;">
    <div style="font-size: 4rem; margin-bottom: 20px; text-shadow: 0 0 30px rgba(212, 175, 55, 0.5);">âš”</div>
    <p style="color: var(--color-primary); font-size: 1.1rem; font-weight: bold; margin-bottom: 10px;">
      Your Adventure Awaits
    </p>
    <p class="text-muted" style="font-size: 0.9rem; line-height: 1.5;">
      Review your choices, enter a name, and click <strong>"Create Character"</strong> to begin your journey.
    </p>
  </div>
{% endblock %}
